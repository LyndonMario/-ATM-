# -ATM-2018/4
## 这个ATM系统基于多进程编写，分为服务器端和客户端，客户端只完成接收信息的功能，而服务器端背后运行许多的进程完成相应功能，再将结果发送到客户端显示。

### 由来：
最近在看Unix环境高级编程这本书，这么厚的一本书，看着看着总会乏味，因此在看完了关于信号的，多进程，进程间通信的章节后，就想着能不能拿这些东西做一个东西，就想到了利用多线程来做一个ATM的系统，总之就是把我学到的这些杂七杂八的东西都用到了进去，也算是一种更深入的学习，不过由于本人代码水平有限，很多地方写的有缺陷，因此仅做纪念和参考。

### 模块介绍：

`客户端模块：`客户端只完成接收外界用户的命令，要求信息等内容，并将相应的信息内容,比如账号,密码信息发送至服务器端，服务器端接收处理完后再发回给客户端，客户端再将接收到的结果直接显示或者做一些处理后再显示。


`服务器模块:`在这个系统中，我是将每一个处理模块单独写成一个单独的程序，各自等待各自类型的消息，生成各自的可执行文件，然后在w服务器程序启动的时候，利用vfork和execl函数创建9个子进程，并将这9个可执行文件加载到各个子进程，父进程则处于休眠状态，直到外界给入一个Ctrl+c信号触发我之前注册的SIGINT信号的处理函数，通过这个函数将这9个进程杀死，最后父进程结束。


### 通信方式：
   在这个系统中，我利用的是XSI方式中的消息队列的方式，每种操作对应着一中消息类型，这个我在msg_queue.h中做了宏定义，`同时客户端发给服务器的消息中除了指<br>定的一些账户信息，还有发送端的进程号，而服务器端在处理完毕返回消息时，返回消息的类型就是这个进程号，这样做的目的就是为了解决当多个客户端向服务器端发送相<br>同命令时，服务器端能给指定客户端发送属于它的消息。`
   
### 程序运行编译b方式：
   我书写了简单的makefile文件，能满足对于整个程序所有文件的编译链接，在命令行中进入的到项目文件后，执行make就可自动编译链接最终生成可执行文件client,server，先执行./server,再执行./client即可进入到ATM系统，完成相应的功能。
